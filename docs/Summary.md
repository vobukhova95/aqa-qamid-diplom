# Отчет о проведённой автоматизации тестирования формы оплаты тура по карте

## 1. Цели и объем автоматизации
**Запланировано:**
- Автоматизация всех тест-кейсов формы оплаты тура по карте (UI).

**Реализовано:**
- Автоматизированы **все тест-кейсы оплаты тура по карте**.
- Дополнительно автоматизированы **API-тесты на проверки формата, обязательных полей и валидации имени держателя**.

**Причины, по которым что-то не было реализовано:**
- Все запланированные кейсы реализованы. Дополнительно добавлены тесты API, что не было изначально запланировано.

---

## 2. Сработавшие риски
1. **Работа с конфиденциальными данными:**
    - Риск: утечка или логирование номеров карт, CVC, имени владельца.
    - Сработал: приложение пропускает через себя данные карт, что в реальной жизни запрещено без PCI DSS.

2. **Зависимость от внешней платёжной системы:**
    - Риск: тесты могут падать из-за недоступности эмулятора банка.
    - Сработал частично: тесты не падали, но поведение эмулятора не всегда предсказуемо — непонятно, по каким принципам обрабатываются данные карт, иногда результаты не совпадали с ожиданиями.

3. **Сообщение об успехе/ошибке появляется с задержкой:**
    - Решение: вставлено ожидание `Duration.ofSeconds`, чтобы тест успевал корректно проверить результат.

4. **JS-маска в полях ввода:**
    - Риск: невозможно ввести текст напрямую (например, буквы в поле номера карты).
    - Сработал: фронт ограничивает ввод, но бэкенд API принимает данные, которые фронт не пропускает.

5. **Текущая дата влияет на тесты:**
    - Риск: тест, работающий в июле, может перестать работать в августе (проверка месяца/года).
    - Решение: использован `LocalDate.now()` и динамическая генерация даты.

6. **Совместимость Docker с Windows:**
    - Риск: запуск контейнеров может быть проблематичным.
    - Сработал: несколько раз Docker не запускался, потребовалась отладка.

---

## 4. Интервальная оценка с учетом рисков

| Этап | План, ч | Факт, ч | Комментарий |
|------|---------|---------|-------------|
| Подготовка окружения, БД | 2 | 1       | Окружение подготовлено быстрее, чем планировалось |
| Реализация тестов | 16 | 34      | Три раза переписывались PageObjects и дополнительно написаны API-тесты, не учтённые изначально |
| Запуск, отладка, стабилизация | 5 | 5       | Соответствует плану |
| Формирование и анализ отчетов | 5 | 3       | Процесс выполнен быстрее, чем планировалось |

**Общий вывод:**
- Все запланированные тест-кейсы по оплате тура реализованы, дополнительно покрыты API-тестами.
- Сработали несколько рисков, часть проблем потребовала дополнительного времени на отладку.
- Расхождение с планом по времени связано с перепиской PageObjects и добавлением API-тестов, а также с необходимостью адаптации к поведению эмулятора банка.
